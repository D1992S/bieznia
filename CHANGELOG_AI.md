# CHANGELOG_AI

Dziennik zmian wykonywanych przez modele AI.

## Template wpisu

- Data:
- Autor (model):
- Zakres plików:
- Co zmieniono:
- Dlaczego:
- Ryzyko/regresja:
- Jak zweryfikowano:
- Następny krok:

## 2026-02-15 (v32)

- Data: 2026-02-15
- Autor (model): GPT-5.2-Codex
- Zakres plików:
  - `docs/PLAN_REALIZACJI.md`
  - `NEXT_STEP.md`
  - `README.md`
  - `CHANGELOG_AI.md`
- Co zmieniono:
  - Wprowadzono nową fazę `10.5` (Hardening) pomiędzy Fazą 10 i 11.
  - Doprecyzowano zakres Fazy 10.5: Golden DB, snapshot tests, trace_id + lineage, Semantic Layer (step 1), ADR mini + scope freeze.
  - Zmieniono Fazę 11 na `LLM Assistant (Lite)` z whitelist tooli, evidence-first i LocalStub deterministycznym.
  - Zmieniono Fazę 12 na `Performance i stabilność` (cache + inkrementalność po stabilizacji metryk).
  - Dodano stałą zasadę procesu: mini ADR + 10-min scope freeze przed każdą nową fazą.
  - Zsynchronizowano status i mapę faz w `NEXT_STEP.md` oraz tabelę postępu w `README.md` (następna faza = 10.5).
- Dlaczego:
  - Celem było utrzymanie spójności roadmapy po domknięciu Faz 0-10 i dodanie minimalnych, praktycznych zabezpieczeń przed wdrażaniem asystenta LLM.
- Ryzyko/regresja:
  - Zmiany są dokumentacyjne; brak ryzyka runtime.
  - Ryzyko organizacyjne: bez pilnowania scope freeze faza 10.5 może nadmiernie rozrosnąć zakres.
- Jak zweryfikowano:
  - Odczyt i porównanie sekcji faz w `docs/PLAN_REALIZACJI.md`, `NEXT_STEP.md`, `README.md`.
  - `pnpm lint` - PASS
  - `pnpm typecheck` - PASS
  - `pnpm test` - PASS
  - `pnpm build` - PASS
- Następny krok:
  - Rozpocząć implementację Fazy 10.5 zgodnie z DoD i zamknąć ADR/evidence baseline przed startem Fazy 11 Lite.

## 2026-02-15 (v31)

- Data: 2026-02-15
- Autor (model): GPT-5 Codex
- Zakres plików:
  - `packages/core/src/migrations/005-ml-anomaly-trend-schema.ts`
  - `packages/core/src/migrations/index.ts`
  - `packages/ml/src/anomaly-trend.ts`
  - `packages/ml/src/anomaly-trend.integration.test.ts`
  - `packages/ml/src/index.ts`
  - `packages/shared/src/ipc/contracts.ts`, `packages/shared/src/ipc/contracts.test.ts`, `packages/shared/src/dto/index.ts`, `packages/shared/src/index.ts`
  - `apps/desktop/src/main.ts`, `apps/desktop/src/ipc-handlers.ts`, `apps/desktop/src/preload.ts`, `apps/desktop/src/ipc-handlers.integration.test.ts`
  - `apps/ui/src/lib/electron-api.ts`, `apps/ui/src/lib/electron-api.types.ts`, `apps/ui/src/hooks/use-dashboard-data.ts`, `apps/ui/src/components/studio-forecast-chart.tsx`, `apps/ui/src/App.tsx`
  - `README.md`, `NEXT_STEP.md`, `docs/PLAN_REALIZACJI.md`, `docs/architecture/data-flow.md`, `CHANGELOG_AI.md`
- Co zmieniono:
  - Domknięto Fazę 10 end-to-end:
    - detekcja anomalii (`Z-score + IQR`, severity/confidence) z persystencją do `ml_anomalies`,
    - analiza trendu (trend/seasonality/residual) + wykrywanie change points przez CUSUM,
    - nowe komendy IPC: `ml:detectAnomalies`, `ml:getAnomalies`, `ml:getTrend`,
    - integracja desktop/preload/UI i nowe hooki danych,
    - overlay anomalii/change points na wykresie + feed anomalii z filtrem + panel trendu,
    - testy planted outliers i planted change points.
  - Uzupełniono dokumentację faz 9/10 i przesunięto „następny krok” na Fazę 11.
- Dlaczego:
  - Celem było pełne dowiezienie DoD Fazy 10: automatyczne wykrywanie anomalii i zmian trendu, czytelna prezentacja w UI oraz pełna ścieżka danych przez IPC.
- Ryzyko/regresja:
  - Dekompozycja trendu jest implementacją STL-like (LOESS + sezonowość okresowa), nie pełnym klasycznym STL.
  - Auto-uruchamianie analizy anomalii w zakładce statystyk zwiększa liczbę zapytań DB przy częstych zmianach zakresu.
- Jak zweryfikowano:
  - `pnpm lint` - PASS
  - `pnpm typecheck` - PASS
  - `pnpm test` - PASS (84/84)
  - `pnpm build` - PASS
- Następny krok:
  - Rozpocząć Fazę 11 (LLM Assistant): orchestrator planner/executor/summarizer, evidence attachment i LocalStub.

## 2026-02-12

- Data: 2026-02-12
- Autor (model): GPT-5.2-Codex
- Zakres plików: `docs/PLAN_REALIZACJI.md`, `README.md`, `CHANGELOG_AI.md`
- Co zmieniono: Dodano formalną sekcję 3.3 z obowiązkowym logowaniem zmian dla PR/commit oraz doprecyzowano to w README.
- Dlaczego: Użytkownik chciał jednoznacznego wymogu, aby każda ingerencja była opisana tak, by inny model mógł bazować na historii zmian.
- Ryzyko/regresja: Brak ryzyka runtime (zmiany wyłącznie w dokumentacji).
- Jak zweryfikowano: Sprawdzenie diff i odczyt plików.
- Następny krok: Wymusić template PR i checklistę w repo (np. `.github/pull_request_template.md`).

## 2026-02-12 (v2)

- Data: 2026-02-12
- Autor (model): Claude Opus 4.6
- Zakres plików: `docs/PLAN_REALIZACJI.md`, `AGENTS.md`, `docs/architecture/overview.md`, `docs/architecture/data-flow.md`, `README.md`, `CHANGELOG_AI.md`
- Co zmieniono:
  - Gruntowna przebudowa PLAN_REALIZACJI.md (496 → 834 linii):
    - Dodano 2 nowe zasady: Performance budgets (#7) i Data quality first (#8).
    - Dodano sekcję 4: Architektura danych (model warstwowy RAW→STAGING→DIM/FACT→ANALYTICS→ML, pipeline ETL, feature engineering, strategia brakujących danych).
    - Zreorganizowano kolejność faz: ML Framework przesunięty z Fazy 10 do Fazy 6.
    - Dodano nową Fazę 4 (Data Pipeline + Feature Engineering) i Fazę 10 (Anomaly Detection + Trend Analysis).
    - Rozszerzono fazy ML o konkretne algorytmy (Holt-Winters, ARIMA, LightGBM roadmap), confidence intervals, shadow mode, graceful degradation.
    - Usprawniono Quality Scoring: percentile rank zamiast sigmoid, confidence levels, szczegółowe formuły.
    - Dodano nowe pakiety: data-pipeline, analytics, top-level fixtures.
    - Dodano UI stack: Zustand + TanStack Query.
    - Dodano sekcje: Risk Register, Milestone'y, mierzalne KPI targets.
  - Stworzono AGENTS.md: pełne zasady modyfikacji kodu, graf zależności, konwencje, rytuał zakończenia sesji.
  - Stworzono docs/architecture/overview.md: diagram modułów, dependency graph, wzorce (IPC, data flow, error handling, state management).
  - Stworzono docs/architecture/data-flow.md: szczegółowy pipeline 7-etapowy, feature engineering formulas, data lineage schema.
  - Zaktualizowano README.md: opis projektu, tabela dokumentów, stack technologiczny.
- Dlaczego: Oryginalny plan miał krytyczne braki: brak data pipeline, ML za późno (Faza 10/18), brak feature engineering, brak strategii state management, brak performance budgets, za płytkie ML (brak konkretnych algorytmów), brak anomaly detection, brak obsługi brakujących danych.
- Ryzyko/regresja: Brak (zmiany tylko w dokumentacji, zero kodu).
- Jak zweryfikowano: Review struktury dokumentów, spójność między PLAN_REALIZACJI ↔ AGENTS.md ↔ overview.md ↔ data-flow.md.
- Następny krok: Rozpocząć implementację Fazy 0 (Foundation) — monorepo setup, TS strict, shared package, Electron shell.

## 2026-02-12 (v3)

- Data: 2026-02-12
- Autor (model): Claude Opus 4.6
- Zakres plików:
  - `package.json`, `pnpm-workspace.yaml`, `tsconfig.base.json`, `.prettierrc.json`, `.gitignore`
  - `eslint.config.js`, `vitest.config.ts`
  - `packages/shared/` (package.json, tsconfig.json, src/index.ts, src/types/result.ts, src/errors/app-error.ts, src/ipc/contracts.ts, src/events/index.ts, src/dto/index.ts)
  - `packages/shared/src/types/result.test.ts`, `packages/shared/src/errors/app-error.test.ts`, `packages/shared/src/ipc/contracts.test.ts`
  - `packages/{core,data-pipeline,sync,reports,llm,ml,analytics,plugins,diagnostics}/` (package.json, tsconfig.json, src/index.ts)
  - `apps/desktop/` (package.json, tsconfig.json, src/main.ts, src/preload.ts)
  - `apps/ui/` (package.json, tsconfig.json, index.html, vite.config.ts, src/main.tsx, src/App.tsx, src/store/index.ts, src/env.d.ts)
- Co zmieniono:
  - Kompletna implementacja Fazy 0 (Foundation):
    - Monorepo pnpm workspaces z 10 pakietami + 2 aplikacjami.
    - TypeScript 5.9 strict (noUncheckedIndexedAccess, verbatimModuleSyntax).
    - ESLint 9 flat config z typescript-eslint strictTypeChecked.
    - Prettier config.
    - Vitest 4 setup (unit tests).
    - Pakiet `shared`: Result<T,E> type, AppError class z factory methods i serializacją, IPC contracts (4 komendy + 3 eventy), Zod 4 schemas, DTO types.
    - Electron shell z security hardening (contextIsolation, sandbox, no nodeIntegration, single instance lock).
    - Preload bridge z channel allowlisting.
    - React 19 + Zustand 5 + TanStack Query 5 app skeleton.
    - Vite 6 build config.
    - 26 testów unit (Result type, AppError, IPC contracts validation).
    - Wszystkie pakiety z poprawnymi workspace dependencies wg grafu zależności z AGENTS.md.
- Dlaczego: Faza 0 jest fundamentem — bez niej żaden kolejny moduł nie może być implementowany. Daje działający szkielet z toolingiem, typami i architekturą.
- Ryzyko/regresja:
  - Zod 4 (nie 3) — API zmieniło się (z.iso.date() zamiast z.string().date()). Kolejne AI muszą używać Zod 4 API.
  - ESLint 9 (nie 10) — typescript-eslint nie wspiera jeszcze ESLint 10.
  - Brak composite TS project references — używamy prostego noEmit + bundler resolution. Wystarczające dla typechecku, ale gdyby ktoś chciał tsc build, trzeba będzie to zmienić.
- Jak zweryfikowano:
  - `pnpm lint` — 0 errors.
  - `pnpm typecheck` — 12/12 pakietów pass.
  - `pnpm test` — 26/26 testów pass.
- Następny krok: Faza 1 (Data Core) — SQLite setup z better-sqlite3, system migracji, tabele RAW/STAGING/DIM/FACT, warstwa query/mutation w pakiecie `core`.

## 2026-02-12 (v4)

- Data: 2026-02-12
- Autor (model): Claude Opus 4.6
- Zakres plików: `AGENTS.md`, `docs/PLAN_REALIZACJI.md`, `apps/ui/src/App.tsx`, `apps/desktop/src/preload.ts`, `packages/shared/src/types/result.ts`, `packages/shared/src/types/result.test.ts`, `package.json`
- Co zmieniono:
  - Dodano zasadę #9 w PLAN_REALIZACJI.md: **Język aplikacji — POLSKI**.
  - Dodano sekcję „Język aplikacji — POLSKI" w AGENTS.md z jasnymi regułami: UI po polsku, komendy błędów widoczne w UI po polsku, kod/zmienne po angielsku, komentarze po angielsku.
  - Przetłumaczono wszystkie user-facing stringi: App.tsx, preload.ts error messages, Result unwrap message.
  - Zaktualizowano description w root package.json.
  - Zaktualizowano test oczekujący polskiego komunikatu błędu.
- Dlaczego: Wymaganie użytkownika — cała aplikacja ma być po polsku. Musi być jawnie zapisane jako zasada, żeby kolejne AI nie dodawały angielskich stringów.
- Ryzyko/regresja: Brak (zmiany w stringach + docs, istniejące testy zaktualizowane).
- Jak zweryfikowano:
  - `pnpm lint` — 0 errors.
  - `pnpm typecheck` — 12/12 pass.
  - `pnpm test` — 26/26 pass.
- Następny krok: Faza 1 (Data Core) — SQLite setup z better-sqlite3, system migracji, tabele RAW/STAGING/DIM/FACT, warstwa query/mutation w pakiecie `core`. Pamiętaj: wszelkie user-facing komunikaty po polsku.

## 2026-02-12 (v5)

- Data: 2026-02-12
- Autor (model): Claude Opus 4.6
- Zakres plików: `NEXT_STEP.md` (nowy), `AGENTS.md`, `README.md`, `docs/PLAN_REALIZACJI.md`
- Co zmieniono:
  - Stworzono `NEXT_STEP.md` — dedykowany plik handoff dla kolejnego AI. Zawiera: aktualny status, co dokładnie robić w następnej fazie, pliki do stworzenia, DoD, krytyczne zasady.
  - Zaktualizowano AGENTS.md:
    - `NEXT_STEP.md` jako punkt #1 w „Przed rozpoczęciem pracy".
    - Rozbudowano rytuał zakończenia sesji o obowiązkową aktualizację NEXT_STEP.md, README.md (tabela postępu), PLAN_REALIZACJI.md (checklista).
  - Dodano tabelę „Postęp realizacji" w README.md — widać od razu które fazy są DONE.
  - Odhaczono ukończone pozycje w checkliście startowej (sekcja 14 planu).
- Dlaczego: Kolejne AI muszą wiedzieć dokładnie co robić bez czytania całego repo. NEXT_STEP.md to single point of truth. Tabela w README daje szybki przegląd statusu.
- Ryzyko/regresja: Brak (zmiany dokumentacyjne).
- Jak zweryfikowano: Review plików, spójność między NEXT_STEP.md ↔ CHANGELOG_AI ↔ README ↔ PLAN_REALIZACJI.
- Następny krok: Faza 1 (Data Core) — patrz `NEXT_STEP.md`.

## 2026-02-12 (v6)

- Data: 2026-02-12
- Autor (model): GPT-5 Codex
- Zakres plików:
  - `package.json`
  - `scripts/dev-desktop.mjs`
  - `apps/desktop/package.json`, `apps/desktop/tsconfig.build.json`, `apps/desktop/src/main.ts`
  - `packages/shared/src/logger/index.ts`, `packages/shared/src/logger/index.test.ts`, `packages/shared/src/index.ts`
  - `.github/workflows/ci.yml`
  - `docs/PLAN_REALIZACJI.md`, `README.md`, `NEXT_STEP.md`, `CHANGELOG_AI.md`
- Co zmieniono:
  - Domknięto brakujące elementy Fazy 0 bez wchodzenia w kolejne fazy.
  - Dopracowano uruchamianie desktopa:
    - `@moze/desktop` buduje runtime JS do `dist` (`tsconfig.build.json`, `build` script),
    - `pnpm dev` uruchamia UI i Electron przez nowy skrypt `scripts/dev-desktop.mjs`,
    - naprawiono ścieżkę produkcyjną renderer (`apps/ui/dist/index.html`) i focus dla single-instance.
  - Dodano foundation logger w `shared` (`createLogger`, structured JSON, severity levels, context) + testy.
  - Dodano CI GitHub Actions: `lint`, `typecheck`, `test`, `build`.
  - Uaktualniono checklistę planu i README/NEXT_STEP pod nowy stan Fazy 0.
- Dlaczego:
  - Poprzednia implementacja miała luki względem DoD Fazy 0 (brak CI, niespójny desktop build/dev, brak loggera).
- Ryzyko/regresja:
  - Desktop `dev` robi jednorazowy build runtime przed startem Electron (bez auto-rebuild watch).
  - Lokalne uruchomienie nadal wymaga środowiska zgodnego z `node >= 22`.
- Jak zweryfikowano:
  - `pnpm install` (workspace install zakończony powodzeniem; ostrzeżenie engines: Node 20 vs wymagane 22).
  - `pnpm lint` — PASS.
  - `pnpm typecheck` — PASS (wszystkie pakiety).
  - `pnpm test` — PASS (4 pliki testowe, 29 testów).
  - `pnpm build` — PASS (w tym `apps/desktop` z `tsconfig.build.json` i `apps/ui` build Vite).
  - Smoke-check artefaktów runtime: `apps/desktop/dist/main.js`, `apps/desktop/dist/preload.js`, `apps/ui/dist/index.html` istnieją.
- Następny krok:
  - Rozpocząć Fazę 1 (Data Core) zgodnie z `NEXT_STEP.md`.

## 2026-02-12 (v7)

- Data: 2026-02-12
- Autor (model): GPT-5 Codex
- Zakres plików: `README.md`, `CHANGELOG_AI.md`
- Co zmieniono:
  - Rozszerzono tabelę „Postęp realizacji” w `README.md` o kolumnę:
    - **„Co powinno działać (prosty opis)”**.
  - Dla każdej fazy (0–19) dodano zrozumiały, nietechniczny opis efektu dla użytkownika.
- Dlaczego:
  - Użytkownik chciał, aby na stronie repo (GitHub) było od razu jasne dla laika, co oznacza każdy etap i czego można się spodziewać po aplikacji.
- Ryzyko/regresja:
  - Brak ryzyka runtime (zmiana wyłącznie dokumentacyjna).
- Jak zweryfikowano:
  - Odczyt `README.md` po zmianie i kontrola, że każda faza ma opis w prostym języku.
- Następny krok:
  - Kontynuować Fazę 1 (Data Core) zgodnie z `NEXT_STEP.md`.

## 2026-02-12 (v8)

- Data: 2026-02-12
- Autor (model): GPT-5 Codex
- Zakres plików: `scripts/dev-desktop.mjs`, `CHANGELOG_AI.md`
- Co zmieniono:
  - Naprawiono uruchamianie `pnpm dev` na Windows:
    - dodano `shell: true` przy `spawn` dla procesu `pnpm`,
    - ujednolicono adres dev servera na `http://localhost:5173`.
- Dlaczego:
  - `pnpm dev` kończyło się błędem `spawn EINVAL` i miało potencjalny rozjazd adresów (`127.0.0.1` vs `::1`).
- Ryzyko/regresja:
  - Niskie; zmiana dotyczy tylko lokalnego skryptu developerskiego.
- Jak zweryfikowano:
  - `pnpm dev` startuje poprawnie (UI + Electron).
  - `http://localhost:5173` zwraca poprawny HTML.
- Następny krok:
  - Kontynuować Fazę 1 (Data Core) zgodnie z `NEXT_STEP.md`.

## 2026-02-12 (v9)

- Data: 2026-02-12
- Autor (model): GPT-5 Codex
- Zakres plików:
  - `packages/core/package.json`
  - `packages/core/src/index.ts`
  - `packages/core/src/database.ts`
  - `packages/core/src/migrations/types.ts`
  - `packages/core/src/migrations/001-initial-schema.ts`
  - `packages/core/src/migrations/index.ts`
  - `packages/core/src/repositories/types.ts`
  - `packages/core/src/repositories/core-repository.ts`
  - `packages/core/src/repositories/index.ts`
  - `packages/core/src/queries/metrics-queries.ts`
  - `packages/core/src/queries/index.ts`
  - `packages/core/src/fixtures/types.ts`
  - `packages/core/src/fixtures/index.ts`
  - `packages/core/src/data-core.integration.test.ts`
  - `fixtures/seed-data.json`
  - `pnpm-workspace.yaml`
  - `pnpm-lock.yaml`
  - `README.md`
  - `docs/PLAN_REALIZACJI.md`
  - `NEXT_STEP.md`
  - `CHANGELOG_AI.md`
- Co zmieniono:
  - Zaimplementowano Fazę 1 (Data Core) w `packages/core`:
    - SQLite connection manager (`better-sqlite3`) z `Result<T, AppError>`.
    - System migracji forward-only z trackingiem (`schema_migrations`) i migracją `001-initial-schema`.
    - Tabele warstw: RAW/Operational/Dimension/Fact zgodnie z planem fazy.
    - Typed repository/mutation layer (upserts + operacje sync/raw).
    - Query layer: `getKpis()` i `getTimeseries()` z deterministycznym `ORDER BY`.
    - Moduł fixture: odczyt `fixtures/seed-data.json` oraz seedowanie bazy.
  - Dodano integracyjne testy DB (in-memory SQLite):
    - idempotentność migracji,
    - seed fixture i odczyt KPI/timeseries.
  - Dodano realistyczny fixture: 90 dni danych, 1 kanał, 50 filmów.
  - Uzupełniono `pnpm-workspace.yaml` o `better-sqlite3` w `onlyBuiltDependencies`, aby build native działał lokalnie/CI.
  - Zaktualizowano statusy dokumentacji: Faza 1 = DONE, Faza 2 = następna.
- Dlaczego:
  - Celem było domknięcie Fazy 1 zgodnie z DoD i przygotowanie stabilnej warstwy danych pod IPC/backend w Fazie 2.
- Ryzyko/regresja:
  - `better-sqlite3` jest natywnym modułem i wymaga build/prebuild dla lokalnego środowiska.
  - Lokalnie nadal jest ostrzeżenie engines (`node >=22` wymagane, aktualnie `20.x`), ale walidacja projektu przechodzi.
- Jak zweryfikowano:
  - `pnpm install --force` (w tym build `better-sqlite3`).
  - `pnpm lint` — PASS.
  - `pnpm typecheck` — PASS.
  - `pnpm test` — PASS (`31/31`, w tym testy integracyjne Data Core).
  - `pnpm build` — PASS.
- Następny krok:
  - Faza 2: Desktop Backend + IPC (podłączenie `core` do `apps/desktop`, handlery IPC, adapter UI przez TanStack Query).

## 2026-02-12 (v10)

- Data: 2026-02-12
- Autor (model): GPT-5 Codex
- Zakres plików:
  - `docs/PLAN_REALIZACJI.md`
  - `NEXT_STEP.md`
  - `README.md`
  - `CHANGELOG_AI.md`
- Co zmieniono:
  - Uspójniono dokumentację statusu po Fazie 1:
    - doprecyzowano, że `perf_events` nie wchodziło do zakresu Fazy 1 (pozostaje w Fazie 18),
    - w checklistcie planu rozdzielono "fixture data" od "fake mode", aby odzwierciedlić aktualny stan repo,
    - ujednolicono status Fazy 2 na `NASTĘPNA` w `NEXT_STEP.md`,
    - ujednolicono komendy regresji (`lint + typecheck + test + build`) w `NEXT_STEP.md`,
    - doprecyzowano komunikat statusu w `README.md`.
- Dlaczego:
  - W dokumentacji były niespójności między planem faz a faktycznie zaimplementowanym schema/data core.
- Ryzyko/regresja:
  - Brak ryzyka runtime (zmiany wyłącznie dokumentacyjne).
- Jak zweryfikowano:
  - Manualny przegląd spójności `README.md` ↔ `NEXT_STEP.md` ↔ `docs/PLAN_REALIZACJI.md`.
  - Potwierdzono brak rozjazdu z aktualnym kodem `packages/core`.
- Następny krok:
  - Implementacja Fazy 2: inicjalizacja DB i handlery IPC w `apps/desktop`, następnie adaptery zapytań IPC po stronie `apps/ui`.

## 2026-02-12 (v11)

- Data: 2026-02-12
- Autor (model): GPT-5 Codex
- Zakres plików:
  - `packages/shared/src/ipc/contracts.ts`, `packages/shared/src/index.ts`
  - `packages/core/src/queries/channel-queries.ts`, `packages/core/src/queries/index.ts`, `packages/core/src/index.ts`
  - `apps/desktop/src/main.ts`, `apps/desktop/src/preload.ts`, `apps/desktop/src/ipc-handlers.ts`, `apps/desktop/src/ipc-handlers.integration.test.ts`
  - `apps/desktop/package.json`, `apps/desktop/scripts/build-desktop.mjs`
  - `apps/ui/src/env.d.ts`, `apps/ui/src/App.tsx`, `apps/ui/src/store/index.ts`
  - `apps/ui/src/lib/electron-api.types.ts`, `apps/ui/src/lib/electron-api.ts`, `apps/ui/src/hooks/use-dashboard-data.ts`
  - `README.md`, `NEXT_STEP.md`, `docs/PLAN_REALIZACJI.md`, `CHANGELOG_AI.md`
- Co zmieniono:
  - Zaimplementowano Fazę 2 (Desktop Backend + IPC) end-to-end:
    - inicjalizacja DB + migracje w `apps/desktop` przy starcie app,
    - IPC handlery dla `app:getStatus`, `db:getKpis`, `db:getTimeseries`, `db:getChannelInfo`,
    - walidacja kontraktów Zod po obu stronach granicy IPC (main + preload),
    - serializacja błędów jako `AppError` bez crashy procesu.
  - Dodano realny `app:getStatus` oparty o stan DB (aktywny profil, sync status, last sync).
  - Dodano query `getChannelInfo()` w `@moze/core` i stabilne eksporty w `core/index`.
  - UI pobiera status/KPI/timeseries/channel info wyłącznie przez `window.electronAPI` + hooki TanStack Query.
  - Dodano testy integracyjne IPC: happy path, invalid payload, core error.
  - Usprawniono build desktop runtime:
    - przejście z `tsc` emit na bundling `esbuild`,
    - umożliwia runtime użycie `@moze/core`/`@moze/shared` (workspace TS sources).
  - Zaktualizowano status dokumentacji: Faza 2 = DONE, Faza 3 = NASTĘPNA.
- Dlaczego:
  - Celem było domknięcie M1 i uruchomienie bezpiecznego, typowanego mostu UI ↔ backend na działającym Data Core.
- Ryzyko/regresja:
  - Desktop build opiera się teraz o bundling `esbuild` (inny pipeline niż wcześniej).
  - W środowisku lokalnym nadal widoczny warning engines (Node 20 vs wymagane >=22).
- Jak zweryfikowano:
  - `pnpm lint` — PASS.
  - `pnpm typecheck` — PASS.
  - `pnpm test` — PASS (34/34, w tym IPC integration tests).
  - `pnpm build` — PASS (w tym `apps/desktop` przez `esbuild`).
- Następny krok:
  - Faza 3: Data Modes + Fixtures (fake/real/record mode, provider interface, cache TTL, rate limiter, runtime toggle).

## 2026-02-12 (v12)

- Data: 2026-02-12
- Autor (model): GPT-5 Codex
- Zakres plikow:
  - `packages/shared/src/ipc/contracts.ts`, `packages/shared/src/ipc/contracts.test.ts`, `packages/shared/src/dto/index.ts`, `packages/shared/src/index.ts`
  - `packages/data-pipeline/src/provider-fixture.ts`, `packages/data-pipeline/src/index.ts`
  - `packages/sync/src/data-provider.ts`, `packages/sync/src/fake-provider.ts`, `packages/sync/src/real-provider.ts`, `packages/sync/src/record-provider.ts`, `packages/sync/src/cache-provider.ts`, `packages/sync/src/rate-limiter.ts`, `packages/sync/src/data-mode-manager.ts`, `packages/sync/src/data-modes.integration.test.ts`, `packages/sync/src/index.ts`
  - `apps/desktop/src/main.ts`, `apps/desktop/src/ipc-handlers.ts`, `apps/desktop/src/ipc-handlers.integration.test.ts`, `apps/desktop/src/preload.ts`, `apps/desktop/package.json`
  - `apps/ui/src/lib/electron-api.types.ts`, `apps/ui/src/lib/electron-api.ts`, `apps/ui/src/hooks/use-dashboard-data.ts`, `apps/ui/src/App.tsx`
  - `README.md`, `NEXT_STEP.md`, `docs/PLAN_REALIZACJI.md`, `CHANGELOG_AI.md`
  - `pnpm-lock.yaml`
- Co zmieniono:
  - Domknieto Faze 3 (Data Modes + Fixtures) end-to-end.
  - Dodano kontrakty IPC i DTO dla trybow danych:
    - `app:getDataMode`, `app:setDataMode`, `app:probeDataMode`.
  - Dodano warstwe fixture provider w `data-pipeline` (load/save provider fixture + fallback do seed fixture).
  - Dodano pelny stack `sync`:
    - interfejs `DataProvider`,
    - provider `fake`,
    - provider `real` (adapter/fixture fallback),
    - provider `record` (zapis replayowalnych fixture),
    - cache TTL per endpoint,
    - rate limiter token bucket,
    - `DataModeManager` (runtime toggle + probe).
  - Podlaczono tryby danych do desktop runtime:
    - inicjalizacja managera w `main.ts`,
    - env override (`MOZE_DATA_MODE`, `MOZE_FAKE_FIXTURE_PATH`, `MOZE_REAL_FIXTURE_PATH`, `MOZE_RECORDING_OUTPUT_PATH`),
    - nowe handlery IPC w `ipc-handlers.ts` i walidacja preload.
  - UI rozszerzone o sekcje "Tryb danych (Faza 3)" + mutacje/query przez TanStack Query.
  - Dodano testy integracyjne:
    - `packages/sync/src/data-modes.integration.test.ts`,
    - rozszerzenie `apps/desktop/src/ipc-handlers.integration.test.ts`.
  - Domknieto poprawki jakosciowe po implementacji:
    - fix lint dla `App.tsx` (`no-confusing-void-expression`),
    - fix typing cache provider (`TS2322`, usuniecie zbednych generykow),
    - usuniecie non-null assertions w real provider.
  - Uaktualniono dokumentacje statusu:
    - Faza 3 = DONE,
    - Faza 4 = NASTEPNA.
- Dlaczego:
  - Celem bylo wdrozenie szybkich i powtarzalnych trybow pracy na danych (fake/real/record) bez zmiany kontraktu po stronie UI oraz przygotowanie fundamentu pod Faze 4/5.
- Ryzyko/regresja:
  - `real` provider jest na razie spiety przez fixture/adapter contract (brak jeszcze produkcyjnego adaptera YouTube API).
  - Lokalnie pozostaje ostrzezenie engines (`node >=22`, aktualnie `20.x`), mimo ze checki przechodza.
- Jak zweryfikowano:
  - `pnpm lint` - PASS.
  - `pnpm typecheck` - PASS.
  - `pnpm test` - PASS (`43/43`, w tym nowe integracje sync i IPC data mode).
  - `pnpm build` - PASS.
- Nastepny krok:
  - Faza 4: Data Pipeline + Feature Engineering (ETL orchestration, validation, staging, feature generation, data lineage).

## 2026-02-12 (v13)

- Data: 2026-02-12
- Autor (model): GPT-5 Codex
- Zakres plikow:
  - `README.md`
  - `NEXT_STEP.md`
  - `docs/PLAN_REALIZACJI.md`
  - `docs/architecture/overview.md`
  - `CHANGELOG_AI.md`
- Co zmieniono:
  - Usunieto z planu produktu elementy niepotrzebne w trybie single-user:
    - plugin runtime (Faza 17 -> SKIP w trybie solo),
    - packaging pod dystrybucje (usuniete z Fazy 19),
    - telemetry opt-in (usuniete z Fazy 19).
  - Zaktualizowano roadmape i opisy faz:
    - README: Faza 17 oznaczona jako `SKIP (solo)`, Faza 19 zmieniona na lokalne dopracowanie UX bez dystrybucji.
    - NEXT_STEP: mapa faz zaktualizowana o `SKIP (solo)` dla pluginow oraz `bez packaging/telemetry` dla Fazy 19.
    - PLAN_REALIZACJI: przebudowano opisy Fazy 17 i 19, zaktualizowano Milestone 6 pod scope solo.
    - architecture/overview: doprecyzowano, ze warstwa plugins jest out-of-scope w trybie solo.
- Dlaczego:
  - Aplikacja bedzie uzywana przez jednego uzytkownika, bez potrzeby dystrybucji, telemetry i plugin architecture.
- Ryzyko/regresja:
  - Brak ryzyka runtime (zmiany dokumentacyjne).
  - Mniejsza rozszerzalnosc w przyszlosci: ewentualny powrot do plugin runtime i packagingu bedzie wymagac osobnego planu.
- Jak zweryfikowano:
  - Przeglad diffow dokumentacji i spojnosc opisow miedzy README, NEXT_STEP, PLAN_REALIZACJI i architecture/overview.
- Nastepny krok:
  - Kontynuowac Faze 4 wedlug nowego scope solo.

## 2026-02-12 (v14)

- Data: 2026-02-12
- Autor (model): GPT-5 Codex
- Zakres plikow:
  - `packages/core/src/migrations/002-data-pipeline-schema.ts`
  - `packages/core/src/migrations/index.ts`
  - `packages/core/src/data-core.integration.test.ts`
  - `packages/data-pipeline/src/pipeline-runner.ts`
  - `packages/data-pipeline/src/pipeline-runner.integration.test.ts`
  - `packages/data-pipeline/src/index.ts`
  - `NEXT_STEP.md`
  - `README.md`
  - `docs/PLAN_REALIZACJI.md`
  - `docs/architecture/data-flow.md`
  - `CHANGELOG_AI.md`
- Co zmieniono:
  - Zaimplementowano Faze 4 (Data Pipeline + Feature Engineering) bez wychodzenia poza zakres faz 1-4.
  - Dodano migracje `002-data-pipeline-schema` tworząca tabele:
    - `stg_channels`
    - `stg_videos`
    - `ml_features`
    - `data_lineage`
  - Dodano runner ETL `runDataPipeline()` w `data-pipeline`:
    - ingestion z `dim_channel`/`dim_video`/`fact_channel_day`,
    - validation (schema + range + freshness),
    - staging do `stg_*`,
    - feature generation do `ml_features`,
    - zapis lineage dla etapow `ingest`, `validation`, `staging`, `feature-generation`.
  - Dodano testy integracyjne pipeline:
    - end-to-end na `fixtures/seed-data.json`,
    - deterministycznosc kolejnych uruchomien,
    - reject dla niepoprawnego range,
    - reject dla stale data.
  - Zaktualizowano dokumentacje statusu:
    - Faza 4 = DONE,
    - Faza 5 = NASTEPNA,
    - data-flow dopasowany do faktycznie zaimplementowanego schematu lineage/staging.
- Dlaczego:
  - Celem bylo domkniecie Fazy 4 i przygotowanie technicznego punktu pod post-sync pipeline z Fazy 5.
- Ryzyko/regresja:
  - Runner pipeline aktualnie operuje na jednym `channelId` na uruchomienie.
  - Integracja automatycznego wywolania po sync pozostaje na Fazę 5 (celowo).
- Jak zweryfikowano:
  - `pnpm lint` - PASS.
  - `pnpm typecheck` - PASS.
  - `pnpm test` - PASS (`47/47`, w tym nowe testy integracyjne data-pipeline).
  - `pnpm build` - PASS.
- Nastepny krok:
  - Faza 5: Sync Orchestrator (checkpointy, retry/backoff, mutex, eventy progress i wywolanie `runDataPipeline()` po sync).

## 2026-02-12 (v15)

- Data: 2026-02-12
- Autor (model): GPT-5 Codex
- Zakres plikow:
  - `packages/shared/src/ipc/contracts.ts`, `packages/shared/src/ipc/contracts.test.ts`, `packages/shared/src/dto/index.ts`, `packages/shared/src/index.ts`
  - `packages/core/src/repositories/types.ts`, `packages/core/src/repositories/core-repository.ts`, `packages/core/src/repositories/index.ts`, `packages/core/src/index.ts`
  - `packages/sync/src/data-mode-manager.ts`, `packages/sync/src/sync-orchestrator.ts`, `packages/sync/src/sync-orchestrator.integration.test.ts`, `packages/sync/src/index.ts`
  - `apps/desktop/src/ipc-handlers.ts`, `apps/desktop/src/ipc-handlers.integration.test.ts`, `apps/desktop/src/preload.ts`, `apps/desktop/src/main.ts`
  - `apps/ui/src/lib/electron-api.types.ts`, `apps/ui/src/lib/electron-api.ts`, `apps/ui/src/hooks/use-dashboard-data.ts`, `apps/ui/src/App.tsx`
  - `README.md`, `NEXT_STEP.md`, `docs/PLAN_REALIZACJI.md`, `docs/architecture/data-flow.md`, `CHANGELOG_AI.md`
- Co zmieniono:
  - Domknieto Faze 5 (Sync Orchestrator) end-to-end.
  - Dodano komendy IPC:
    - `sync:start`
    - `sync:resume`
    - DTO wyniku komendy sync.
  - Rozszerzono `core` repository dla `sync_runs`:
    - checkpoint update,
    - resume run (reset finished/error),
    - odczyt run po ID,
    - odczyt najnowszego aktywnego run.
  - Zaimplementowano `createSyncOrchestrator()`:
    - stage machine (`collect-provider-data` -> `persist-warehouse` -> `run-pipeline` -> `completed`),
    - checkpointy w `sync_runs` + resume,
    - mutex blokujacy rownolegly sync,
    - retry/backoff dla bledow providera,
    - zapis do `raw_api_responses` i warehouse tables,
    - automatyczne `runDataPipeline()` po sync.
  - Podlaczono orchestrator do Electron main i eventow:
    - `sync:progress`, `sync:complete`, `sync:error`.
  - UI rozszerzone o sekcje Fazy 5:
    - uruchamianie sync,
    - wznowienie ostatniego nieudanego sync,
    - podglad postepu/bledu/zakonczenia.
  - Dodano testy integracyjne orchestratora:
    - happy path,
    - blokada rownoleglego uruchomienia,
    - fail na pipeline + resume z checkpointu `run-pipeline`.
  - Zaktualizowano dokumentacje statusu:
    - Faza 5 = DONE,
    - Faza 6 = NASTEPNA.
- Dlaczego:
  - Celem bylo zamkniecie warstwy resilient sync i spiecie jej z pipeline danych, aby M2 mial kompletny przeplyw sync -> ETL -> features.
- Ryzyko/regresja:
  - Retry/backoff w orchestratorze obejmuje klasy bledow providers zdefiniowane kodami (`SYNC_PROVIDER_*`, `SYNC_RATE_LIMIT_EXCEEDED`).
  - Resume wymaga jawnego `channelId` w komendzie `sync:resume` (celowo, zeby uniknac ukrytego stanu procesu).
  - Lokalnie nadal widoczny warning engines (`node >=22`, aktualnie `20.x`), mimo ze checki przechodza.
- Jak zweryfikowano:
  - `pnpm lint` - PASS.
  - `pnpm typecheck` - PASS.
  - `pnpm test` - PASS (`53/53`, w tym nowe testy sync orchestratora).
  - `pnpm build` - PASS.
- Nastepny krok:
  - Faza 6: Bazowy ML Framework (registry modeli, baseline trening, backtesting i quality gate).

## 2026-02-12 (v16)

- Data: 2026-02-12
- Autor (model): GPT-5 Codex
- Zakres plikow:
  - `packages/core/src/migrations/003-ml-framework-schema.ts`, `packages/core/src/migrations/index.ts`, `packages/core/src/data-core.integration.test.ts`
  - `packages/ml/src/ml-baseline.ts`, `packages/ml/src/ml-baseline.integration.test.ts`, `packages/ml/src/index.ts`, `packages/ml/package.json`
  - `packages/shared/src/ipc/contracts.ts`, `packages/shared/src/ipc/contracts.test.ts`, `packages/shared/src/dto/index.ts`, `packages/shared/src/index.ts`
  - `apps/desktop/src/ipc-handlers.ts`, `apps/desktop/src/ipc-handlers.integration.test.ts`, `apps/desktop/src/preload.ts`, `apps/desktop/src/main.ts`, `apps/desktop/package.json`
  - `apps/ui/src/lib/electron-api.types.ts`, `apps/ui/src/lib/electron-api.ts`, `apps/ui/src/hooks/use-dashboard-data.ts`, `apps/ui/src/App.tsx`
  - `README.md`, `NEXT_STEP.md`, `docs/PLAN_REALIZACJI.md`, `docs/architecture/data-flow.md`, `CHANGELOG_AI.md`
- Co zmieniono:
  - Domknieto Faze 6 (Bazowy ML Framework) end-to-end.
  - Dodano migracje `003-ml-framework-schema`:
    - `ml_models` (registry modeli),
    - `ml_backtests`,
    - `ml_predictions` (predictions + confidence levels).
  - Zaimplementowano pipeline ML w `@moze/ml`:
    - `runMlBaseline()`:
      - modele: `holt-winters` (double exponential smoothing) i `linear-regression`,
      - rolling backtesting,
      - metryki: `MAE`, `sMAPE`, `MASE`,
      - quality gate (`active`/`shadow`/`rejected`),
      - confidence bands `p10/p50/p90`,
      - graceful degradation dla historii < 30 dni (`insufficient_data`).
    - `getLatestMlForecast()`:
      - odczyt prognozy aktywnego modelu.
  - Dodano IPC kontrakty i handlery ML:
    - `ml:runBaseline`,
    - `ml:getForecast`.
  - UI rozszerzone o sekcje Fazy 6:
    - uruchamianie treningu baseline,
    - podglad aktywnego modelu i punktow prognozy.
  - Dodano testy integracyjne ML:
    - trening i zapis predictions/backtests,
    - quality gate z blokada aktywacji przy ostrych progach,
    - graceful degradation dla zbyt krotkiej historii.
  - Zaktualizowano dokumentacje statusu:
    - Faza 6 = DONE,
    - Faza 7 = NASTEPNA.
- Dlaczego:
  - Celem bylo domkniecie warstwy ML baseline, aby dane z pipeline i sync mialy od razu pierwszy, praktyczny forecast oraz fundament pod dashboard z predykcjami.
- Ryzyko/regresja:
  - Implementacja `holt-winters` w tej fazie to wariant double exponential smoothing (bez sezonowosci) jako baseline.
  - Aktywacja modelu zalezy od quality gate; przy slabszych danych aktywny model moze pozostac `null`.
  - Lokalnie nadal widoczny warning engines (`node >=22`, aktualnie `20.x`), mimo ze checki przechodza.
- Jak zweryfikowano:
  - `pnpm lint` - PASS.
  - `pnpm typecheck` - PASS.
  - `pnpm test` - PASS (`60/60`, w tym nowe testy ML baseline).
  - `pnpm build` - PASS.
- Nastepny krok:
  - Faza 7: Dashboard + Raporty + Eksport (overlay prognoz ML na wykresach + eksport raportow).

## 2026-02-12 (v17)

- Data: 2026-02-12
- Autor (model): GPT-5 Codex
- Zakres plikow:
  - `packages/shared/src/ipc/contracts.ts`, `packages/shared/src/ipc/contracts.test.ts`, `packages/shared/src/dto/index.ts`, `packages/shared/src/index.ts`
  - `packages/reports/src/report-service.ts`, `packages/reports/src/report-service.integration.test.ts`, `packages/reports/src/index.ts`
  - `apps/desktop/src/ipc-handlers.ts`, `apps/desktop/src/ipc-handlers.integration.test.ts`, `apps/desktop/src/preload.ts`, `apps/desktop/src/main.ts`, `apps/desktop/package.json`
  - `apps/ui/src/lib/electron-api.ts`, `apps/ui/src/lib/electron-api.types.ts`, `apps/ui/src/hooks/use-dashboard-data.ts`, `apps/ui/src/hooks/use-dashboard-data.test.ts`, `apps/ui/src/App.tsx`
  - `README.md`, `NEXT_STEP.md`, `docs/PLAN_REALIZACJI.md`, `docs/architecture/data-flow.md`, `CHANGELOG_AI.md`
- Co zmieniono:
  - Domknieto Faze 7 (Dashboard + Raporty + Eksport) end-to-end.
  - Dodano kontrakty IPC dla raportow:
    - `reports:generate`
    - `reports:export`
  - Zaimplementowano pakiet `@moze/reports`:
    - `generateDashboardReport()` (KPI + timeseries + prognoza + top videos + insighty),
    - `exportDashboardReport()` (lokalny eksport `JSON/CSV/HTML`),
    - `renderDashboardReportHtml()`.
  - Podlaczono raporty do desktop runtime i preload bridge.
  - Rozbudowano UI dashboard:
    - karty KPI z delta/trendem,
    - wykres szeregu czasowego z overlay prognozy (`p10/p50/p90`),
    - zakres dat `7d/30d/90d/custom`,
    - sekcja raportu (insighty + top videos) oraz eksport raportu.
  - Dodano testy:
    - integracyjne `reports` (generowanie raportu, walidacja zakresu dat, eksport plikow),
    - helpery zakresu dat w UI,
    - rozszerzone integracje IPC desktop dla raportow.
  - Zaktualizowano status dokumentacji:
    - Faza 7 = DONE,
    - Faza 8 = NASTEPNA.
- Dlaczego:
  - Celem Fazy 7 bylo dowiezienie pierwszej duzej wartosci biznesowej: czytelny dashboard i lokalny eksport raportow.
- Ryzyko/regresja:
  - Eksport aktualnie obejmuje `JSON/CSV/HTML`; PDF pozostaje opcjonalny i nie jest jeszcze implementowany.
  - Lokalny warning engines nadal wystepuje (`node >=22`, aktualnie `20.x`), mimo ze checki przechodza.
- Jak zweryfikowano:
  - `pnpm lint` - PASS.
  - `pnpm typecheck` - PASS.
  - `pnpm test` - PASS (`68/68`, w tym nowe testy reports i UI helper).
  - `pnpm build` - PASS.
- Nastepny krok:
  - Faza 8: Auth + Profile + Settings (connect/disconnect/status, multi-profile, settings per profil, safeStorage dla sekretow).

## 2026-02-12 (v18)

- Data: 2026-02-12
- Autor (model): GPT-5 Codex
- Zakres plikow:
  - `apps/desktop/package.json`
  - `pnpm-lock.yaml`
  - `CHANGELOG_AI.md`
- Co zmieniono:
  - Hotfix uruchamiania `pnpm dev`:
    - dodano `better-sqlite3` do runtime dependencies `@moze/desktop`.
  - Powod:
    - Electron runtime nie mogl znalezc pakietu `better-sqlite3` (`ERR_MODULE_NOT_FOUND`) przy starcie `apps/desktop/dist/main.js`.
- Dlaczego:
  - Bez tej zaleznosci aplikacja desktop nie startowala lokalnie mimo poprawnego buildu.
- Ryzyko/regresja:
  - Niskie; zmiana tylko w deklaracji dependency + lockfile.
- Jak zweryfikowano:
  - `pnpm install` — PASS.
  - `pnpm dev` — Electron i UI startuja poprawnie.
  - `http://localhost:5173` — HTTP 200.
- Nastepny krok:
  - Kontynuowac Faze 8 zgodnie z `NEXT_STEP.md`.

## 2026-02-13 (v19)

- Data: 2026-02-13
- Autor (model): GPT-5 Codex
- Zakres plikow:
  - `apps/desktop/src/main.ts`
  - `apps/desktop/src/profile-manager.ts`
  - `apps/desktop/src/profile-manager.integration.test.ts`
  - `apps/desktop/src/ipc-handlers.ts`
  - `apps/desktop/src/ipc-handlers.integration.test.ts`
  - `apps/desktop/src/preload.ts`
  - `apps/ui/src/lib/electron-api.types.ts`
  - `apps/ui/src/lib/electron-api.ts`
  - `apps/ui/src/hooks/use-dashboard-data.ts`
  - `apps/ui/src/App.tsx`
  - `packages/core/src/queries/settings-queries.ts`
  - `packages/core/src/queries/index.ts`
  - `packages/core/src/index.ts`
  - `packages/core/src/data-core.integration.test.ts`
  - `packages/shared/src/ipc/contracts.ts`
  - `packages/shared/src/ipc/contracts.test.ts`
  - `packages/shared/src/dto/index.ts`
  - `packages/shared/src/index.ts`
  - `README.md`, `NEXT_STEP.md`, `docs/PLAN_REALIZACJI.md`, `docs/architecture/data-flow.md`, `CHANGELOG_AI.md`
- Co zmieniono:
  - Domknieto Faze 8 (Auth + Profile + Settings) end-to-end.
  - Podlaczono profile manager do desktop runtime:
    - oddzielna baza SQLite per profil,
    - przelaczanie aktywnego profilu z przeladowaniem backendu,
    - synchronizacja aktywnego profilu do tabeli `profiles` w aktywnej DB.
  - Dodano query layer ustawien (`createSettingsQueries`) i komendy IPC settings/auth/profile.
  - Rozszerzono preload + UI API + hooki React Query o profile/settings/auth.
  - Rozszerzono UI o sekcje:
    - profile (lista, utworz, aktywuj),
    - konto YouTube (status/connect/disconnect),
    - ustawienia per profil.
  - Dodano testy integracyjne profile managera (persistencja po restarcie, izolacja ustawien per profil, brak plaintext sekretu).
  - Rozszerzono testy integracyjne IPC desktop o nowe handlery fazy 8.
  - Ujednolicono dokumentacje: Faza 8 = DONE, Faza 9 = NASTEPNA.
- Dlaczego:
  - Celem bylo dostarczenie kompletnej separacji danych per profil i bezpiecznego przechowywania auth, zgodnie z DoD Fazy 8.
- Ryzyko/regresja:
  - Lokalnie nadal wystepuje warning engines (`node >=22`, aktualnie `20.x`), mimo ze wszystkie checki przechodza.
  - Zmiana aktywnego profilu przeladowuje backend (chwilowe odswiezenie stanu UI jest oczekiwane).
- Jak zweryfikowano:
  - `pnpm lint` - PASS.
  - `pnpm typecheck` - PASS.
  - `pnpm test` - PASS (`72/72`, w tym nowe testy profile-manager + rozszerzone IPC).
  - `pnpm build` - PASS.
- Nastepny krok:
  - Faza 9: Import + Enrichment + Search (CSV import + walidacja + trigger pipeline + FTS5 search z snippet/relevance).

## 2026-02-13 (v20)

- Data: 2026-02-13
- Autor (model): GPT-5 Codex
- Zakres plikow:
  - `apps/desktop/scripts/build-desktop.mjs`
  - `scripts/dev-desktop.mjs`
  - `README.md`
  - `NEXT_STEP.md`
  - `docs/PLAN_REALIZACJI.md`
  - `CHANGELOG_AI.md`
- Co zmieniono:
  - Naprawiono preload desktop w dev:
    - build `main.ts` zostal jako `esm`,
    - build `preload.ts` zostal przelaczony na `cjs`, zeby preload byl ladowany poprawnie przez Electron sandbox.
  - Ujednolicono host dev servera w launcherze desktop:
    - `127.0.0.1:5173` dla UI i `VITE_DEV_SERVER_URL`.
  - Ujednolicono dokumentacje uruchamiania:
    - rekomendowane komendy przez `corepack pnpm ...` (README + PLAN + NEXT_STEP).
  - Dopisano aktualny stan techniczny i handoff do kolejnej sesji w `NEXT_STEP.md`.
- Dlaczego:
  - Aplikacja uruchamiala tylko webowy fallback, bo preload nie ladowal sie poprawnie (`Cannot use import statement outside a module`).
  - Dodatkowo wystepowal rozjazd hosta (`localhost` vs `127.0.0.1`) oraz ryzyko ABI mismatch przy globalnym `pnpm` odpalanym na Node 20.
- Ryzyko/regresja:
  - Niskie; zmiana dotyczy sposobu bundlowania preload i skryptu dev.
  - W trybie dev trzeba utrzymac spojnosc hosta (`127.0.0.1`) przy ewentualnych przyszlych zmianach.
- Jak zweryfikowano:
  - `corepack pnpm lint` - PASS.
  - `corepack pnpm typecheck` - PASS.
  - `corepack pnpm test` - PASS (72/72).
  - `corepack pnpm build` - PASS.
  - Manualnie: uruchomienie UI (`http://127.0.0.1:5173` -> 200) i desktop (okno Electron z dzialajacym IPC).
- Nastepny krok:
  - Rozpoczac Faze 9 (Import + Enrichment + Search) na stabilnym runtime desktop.

## 2026-02-13 (v21)

- Data: 2026-02-13
- Autor (model): GPT-5 Codex
- Zakres plikow:
  - `docs/runbooks/test-plan-faza-0-8.md`
  - `README.md`
  - `NEXT_STEP.md`
  - `CHANGELOG_AI.md`
- Co zmieniono:
  - Dodano nowy runbook testowy obejmujacy funkcje dostepne po Fazie 8:
    - scenariusze manualne,
    - gotowe prompty LLM do audytu,
    - kryteria PASS/FAIL,
    - kryterium gotowosci do rozpoczecia Fazy 9.
  - Zaktualizowano README o link do runbooka testowego.
  - Zaktualizowano NEXT_STEP o aktualny stan sesji i rekomendacje: najpierw domkniecie testow funkcji 0-8.
- Dlaczego:
  - Potrzebny byl szeroki, operacyjny plan testow (manual + AI) przed rozpoczeciem Fazy 9.
- Ryzyko/regresja:
  - Niskie; zmiany tylko dokumentacyjne.
  - Ryzyko operacyjne: bez konsekwentnego wykonania runbooka mozna przeniesc defekty do Fazy 9.
- Jak zweryfikowano:
  - Przeglad dokumentacji i spojnosc linkow w README.
  - `corepack pnpm lint` - PASS.
  - `corepack pnpm typecheck` - PASS.
  - `corepack pnpm test` - PASS.
  - `corepack pnpm build` - PASS.
- Nastepny krok:
  - Wykonac runbook `docs/runbooks/test-plan-faza-0-8.md`, zebrac bugi/P0-P1 i dopiero potem wejsc w implementacje Fazy 9.

## 2026-02-13 (v22)

- Data: 2026-02-13
- Autor (model): GPT-5 Codex
- Zakres plikow:
  - `docs/runbooks/test-plan-faza-0-8.md`
  - `NEXT_STEP.md`
  - `CHANGELOG_AI.md`
- Co zmieniono:
  - Doprecyzowano runbook testowy po feedbacku uzytkownika:
    - dodano sekcje `0. Instrukcja krok po kroku (dla osoby bez doswiadczenia)`,
    - dodano jednoznaczna kolejnosc dzialan,
    - dodano gotowy szablon raportu testow (PASS/FAIL + buglista + decyzja GO/NO-GO).
  - Zaktualizowano `NEXT_STEP.md` o stan sesji i rekomendacje operacyjna.
- Dlaczego:
  - Wczesniejsza wersja runbooka nie dawala wystarczajaco jasnej odpowiedzi "co mam zrobic" dla poczatkujacego uzytkownika.
- Ryzyko/regresja:
  - Niskie; zmiany dokumentacyjne.
  - Ryzyko operacyjne: pomijanie sekcji 0 moze ponownie utrudnic przeprowadzenie testow.
- Jak zweryfikowano:
  - Przeglad runbooka pod katem krokow wykonywalnych przez osobe poczatkujaca.
  - `corepack pnpm lint` - PASS.
  - `corepack pnpm typecheck` - PASS.
  - `corepack pnpm test` - PASS.
  - `corepack pnpm build` - PASS.
- Nastepny krok:
  - Uzytkownik wykonuje testy wedlug sekcji 0 i raportuje wynik szablonem z runbooka; po zamknieciu P0/P1 rozpoczynamy Faze 9.

## 2026-02-13 (v23)

- Data: 2026-02-13
- Autor (model): GPT-5.2-Codex
- Zakres plikow:
  - `docs/runbooks/test-plan-faza-0-8.md`
  - `README.md`
  - `NEXT_STEP.md`
  - `docs/PLAN_REALIZACJI.md`
  - `CHANGELOG_AI.md`
- Co zmieniono:
  - Przepisano runbook testow funkcjonalnych Faz 0-8 na wersje ultra-prosta dla osob nietechnicznych.
  - Uproszczono instrukcje do krotkiej listy krokow, dodano jasna regule GO/NO-GO i skrocony szablon raportu.
  - Zaktualizowano README (opis runbooka), NEXT_STEP (stan sesji) oraz checklistę w PLAN_REALIZACJI (sekcja 14).
- Dlaczego:
  - Uzytkownik poprosil o jeszcze prostsze wyjasnienie runbooka "jak dla laika".
- Ryzyko/regresja:
  - Niskie; zmiany tylko w dokumentacji.
  - Ryzyko operacyjne: zbyt duze uproszczenie moze pominac niuanse diagnostyczne, dlatego zostawiono sekcje o twardej regresji technicznej i priorytetach P0/P1.
- Jak zweryfikowano:
  - Przeglad tresci dokumentow i spojnosc odwolan.
  - `corepack pnpm lint` - PASS.
  - `corepack pnpm typecheck` - PASS.
  - `corepack pnpm test` - PASS.
  - `corepack pnpm build` - PASS.
- Nastepny krok:
  - Wykonac runbook w nowej, uproszczonej wersji i podjac decyzje GO/NO-GO przed startem Fazy 9.

## 2026-02-15 (v24)

- Data: 2026-02-15
- Autor (model): GPT-5 Codex
- Zakres plikow:
  - `apps/ui/src/App.tsx`
  - `apps/ui/src/components/studio-forecast-chart.tsx`
  - `apps/ui/package.json`
  - `packages/core/src/queries/metrics-queries.ts`
  - `pnpm-lock.yaml`
  - `NEXT_STEP.md`
  - `CHANGELOG_AI.md`
- Co zmieniono:
  - Przywrocono zakladki dashboardu:
    - `Statystyki`, `Raporty i eksport`, `Ustawienia`.
  - W sekcji `Statystyki` wdrozono layout Studio:
    - kafle KPI,
    - panel szeregu czasowego + prognoza ML,
    - lista najblizszych predykcji (p50).
  - Ujednolicono kolorystyke dark na poziomie calego UI.
  - Wydzielono wykres Recharts do osobnego komponentu i podlaczono lazy loading:
    - dynamiczny import przez `React.lazy` + `Suspense`,
    - osobny chunk `studio-forecast-chart`.
  - Naprawiono drobny problem lint w `metrics-queries` (warunek `undefined`).
  - Naprawiono lokalny problem testowy z ABI natywnego modulu:
    - zatrzymanie procesow `node/electron`,
    - `pnpm --filter @moze/core rebuild better-sqlite3`.
- Dlaczego:
  - Celem bylo utrzymanie uzgodnionego UX (zakladki + podzial sekcji) oraz podniesienie czytelnosci i spojnosc UI.
  - Dodatkowo celem bylo zmniejszenie rozmiaru startowego bundla przez odroczenie ladowania ciezkiego modulu wykresu.
- Ryzyko/regresja:
  - Wykres jest ladowany leniwie; przy slabym IO pojawi sie krotki fallback "Ladowanie modulu wykresu...".
  - Natywne moduly (`better-sqlite3`) pozostaja wrazliwe na zmiane wersji Node; po zmianie runtime moze byc potrzebny rebuild.
- Jak zweryfikowano:
  - `pnpm lint` - PASS.
  - `pnpm typecheck` - PASS.
  - `pnpm test` - PASS (`76/76`).
  - `pnpm build` - PASS.
  - Build UI po optymalizacji:
    - `assets/index-*.js` ~265.75 kB,
    - `assets/studio-forecast-chart-*.js` ~350.61 kB.
- Nastepny krok:
  - Kontynuowac Faze 9 (`Import + Enrichment + Search`) z zachowaniem obecnego podzialu zakladek i stylu dark.

## 2026-02-15 (v25)

- Data: 2026-02-15
- Autor (model): GPT-5 Codex
- Zakres plikow:
  - `packages/shared/src/ipc/contracts.ts`
  - `packages/shared/src/ipc/contracts.test.ts`
  - `packages/shared/src/dto/index.ts`
  - `packages/shared/src/index.ts`
  - `packages/core/src/migrations/004-import-search-schema.ts`
  - `packages/core/src/migrations/index.ts`
  - `packages/core/src/queries/import-search-queries.ts`
  - `packages/core/src/queries/index.ts`
  - `packages/core/src/index.ts`
  - `packages/core/src/import-search.integration.test.ts`
  - `apps/desktop/src/ipc-handlers.ts`
  - `apps/desktop/src/main.ts`
  - `apps/desktop/src/preload.ts`
  - `apps/desktop/src/ipc-handlers.integration.test.ts`
  - `apps/desktop/package.json`
  - `apps/ui/src/lib/electron-api.types.ts`
  - `apps/ui/src/lib/electron-api.ts`
  - `apps/ui/src/hooks/use-dashboard-data.ts`
  - `apps/ui/src/App.tsx`
  - `README.md`
  - `NEXT_STEP.md`
  - `docs/PLAN_REALIZACJI.md`
  - `pnpm-lock.yaml`
- Co zmieniono:
  - Domknieto Faze 9 end-to-end:
    - nowe kontrakty IPC/DTO dla importu CSV i wyszukiwania FTS,
    - nowe komendy IPC: `import:previewCsv`, `import:runCsv`, `search:content`.
  - Dodano migracje `004-import-search-schema`:
    - tabela `raw_csv_imports`,
    - tabela `dim_content_documents`,
    - indeks FTS5 `fts_content_documents` + triggery synchronizujace indeks.
  - Dodano `createImportSearchQueries` w `core`:
    - parser CSV (delimiter auto/comma/semicolon/tab, quoted values),
    - podglad CSV + sugerowane mapowanie,
    - walidacja wiersz/kolumna z raportem problemow,
    - import danych dziennych do `fact_channel_day`,
    - zapis dokumentow tresci do indeksu FTS,
    - wyszukiwanie z `snippet` i rankingiem `bm25`.
  - W runtime desktop:
    - podlaczono nowe handlery/bridge preload,
    - po imporcie automatycznie uruchamiany `runDataPipeline`.
  - W UI:
    - dodano zakladke `Import i wyszukiwanie`,
    - podglad CSV, mapowanie kolumn, import + wynik walidacji,
    - wyszukiwarka FTS i prezentacja wynikow.
  - Dodano testy integracyjne fazy:
    - `packages/core/src/import-search.integration.test.ts`,
    - rozszerzone `packages/shared/src/ipc/contracts.test.ts`,
    - rozszerzone `apps/desktop/src/ipc-handlers.integration.test.ts`.
- Dlaczego:
  - Celem bylo zakonczone wdrozenie Fazy 9 (Import + Enrichment + Search) zgodnie z planem i DoD:
    import CSV musi zasilac analityke, a wyszukiwarka ma dzialac na tytulach/opisach/transkrypcjach.
- Ryzyko/regresja:
  - Import oczekuje poprawnego mapowania wymaganych kolumn (`date`, `views`, `subscribers`, `videos`).
  - Dane tekstowe z importu sa wyswietlane jako zwykly tekst (bez renderowania HTML) dla bezpieczenstwa.
  - FTS opiera sie na SQLite FTS5; w razie niestandardowego buildu SQLite bez FTS5 funkcja wyszukiwania nie bedzie dostepna.
- Jak zweryfikowano:
  - `pnpm lint` - PASS
  - `pnpm typecheck` - PASS
  - `pnpm test` - PASS (`80/80`)
  - `pnpm build` - PASS
- Nastepny krok:
  - Rozpoczac Faze 10: `Anomaly Detection + Trend Analysis`.
